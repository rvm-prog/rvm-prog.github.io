<!DOCTYPE HTML>
<!--
	Editorial 
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Introduction - Article</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<h2>
									<a href="open.html" class="logo"><strong>R code</strong></a>
									</h2>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h2</h2>
									</header>

									<p>The library shape is used to produce the arrows in this project. 
									</p>
									
								 <h3>Library</h3>
								 <pre>
									 <code>
# library used for the project
library(shape)
# x1, x2 = start and stop x coordinates
# y1, y2 = start and stop y coordinates
# arr.type = triangle
# Arrows(x1, y1, x2, y2, arr.type="triangle") 
								 </code>
								 </pre>
										
								  <h3>R code window</h3>
								
									<p>Only the sensitivity and specificity values has to be changed to create the different figures
										
									</p>
								  
								 <pre>
 <code>
# R code to construct, FN,TN,FP,TP curves
# only change the sensititvity and specificity and all plots will be generated
										
sens = 0.70
spec = 0.95
# save text in plot as variable text
a =paste("sens = ",sens)
b =paste("spec = ",spec)
# save text
										
prev <- c(0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 
		  0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75,
		  0.8,0.85, 0.90, 0.95, 1)
x <- prev
length(x)
						
# pretest-probability = prevalence = prev
# sick
sick <- prev*100
length(sick)
									
# notsick
notsick = 100 - sick
length(notsick)
									
# TP = true positives
TP <- sick * sens  
length(TP)
										
# TN = true negatives
TN = spec * notsick # 
length(TN)
										
# FN = false negatives = sick - TP
FN = sick -TP
										
# FP
FP= notsick - TN
										
# summary all variables in een data frame
sumsicktest = TP+FN
sumnotsicktest = TN+FP
ds <- data.frame(sick,notsick,FN,TP, sumsicktest, FP,TN, sumnotsicktest)
ds
# all variables, 
# check sick = sumsick
# check notsick = sumnotsicktest
										
# FNPV = FN/(FN +TN) 
numerator = FN
denominator = FN + TN
FNPV <- numerator/denominator
FNPV <- round(FNPV,2)
FNPV
										
numerator = TN
TN
FN 
denominator = FN + TN
NPV <- numerator/denominator
NPV <- round(NPV,2)
NPV
										
numerator = FP
denominator = FP + TP
FPPV <- numerator/denominator
FPPV <- round(FPPV,2)
FPPV
										
numerator = TP
FP = notsick - TN
FP
denominator = FP + TP
PPV <- numerator/denominator
PPV <- round(PPV,2)
PPV
										
# add all PVs to the datasset ds
ds <- data.frame(sick,notsick,FN,TP, sumsicktest, FP,TN, sumnotsicktest,
				 FNPV,NPV,FPPV,PPV)
ds
#  end
										
										
										
# alltogehter
										
										
op <- par(mfrow = c(1, 2), pty = "s")   
# FNPV and TNPV
										
x1 <- x*100
y <- ds$FNPV*100
plot(x1,y, type = "b", xlim = c(0,100), 
		 ylim = c(0,100), main= "FNPV and TNPV", 
		 sub = paste(a,b, sep=", "),
		 xlab = "pre-test prob",
		 ylab="PV", col = "darkred",
		 axes = FALSE, lwd=1) # or lwd = 2
										
y2<- ds$NPV*100
lines(x1,y2, type = "b",col= "darkgreen", lwd=1)
										
										
abline(h=5, col ="red", lty = 2)
axis(side=1, at=seq(0,100, by=10))
axis(side=2, at=seq(0,100, by=10))
legend(1, 60, legend=c("FNPV", "TNPV"),
		   col=c("darkred", "darkgreen"), lty=1, cex=0.8)
# end FNPV and TNPV
										
# FPPV and TPPV
y <- ds$FPPV*100
plot(x1,y, type = "b", xlim = c(0,100), 
		 ylim = c(0,100), main= "FPPV and TPPV",
		 sub = paste(a,b,sep=", "),
		 xlab = "pre-test prob",
		 ylab = "PV", col = "darkred",
		 axes = FALSE,lwd=1)
										
y2 <-ds$PPV*100
lines(x1,y2, type = "b",col= "darkgreen", lwd=1)
										
abline(h=5, col ="darkred", lty = 2)
axis(side=1, at=seq(0,100, by=10))
axis(side=2, at=seq(0,100, by=10))
legend(60, 60, legend=c("FPPV", "TPPV"),
	   col=c("darkred", "darkgreen"), lty=1, cex=0.8)
										
# end FPPV and TPPV
										
op <- par(mfrow = c(1,1), pty = "s")   										
</code>
								</pre>	
									<header id="header">
									<a href="index.html" class="logo"><strong>Download R code</strong></a>
									<ul class="icons">
										<li><a href="https://github.com/rvm-prog/NEJM-Covid" class="icon brands fa-github">
											<span class="label">Github</span></a>
										</li>
									</ul>
									</header>	
										
									<h2 id = "Down"> Download</h2>
									<p> The R files from the 
										<a href="https://github.com/rvm-prog/NEJM-Covid">Github Repository</a>.<br>
										On the Github repository page, select the <strong>Green</strong> Code button. <br>
										After downloading the Zip file, you will find the "NEJM-Covid-main.zip" in your download folder.
									</p>
									
									
									

									
						</section>

						</div>
					</div>

				<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Search -->
								
							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="index.html">Start</a></li>
										<li><a href="generic.html">Article</a></li>
										<li><a href="generic.html#Conc">Conclusions</a></li>
										<li><a href="generic.html#Ref">References</a></li>
										<li><a href="Code.html">R code</a></li>
										<li><a href="Code.html#Down">Download</a></li> 
									</ul>
									
									<hr class="major" />
									
								</nav>
								

							<!-- Section -->
								<section>
									
								</section>

							<!-- Section -->
								
							<!-- Footer -->
								
						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>